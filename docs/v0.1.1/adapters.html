
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Adapters · DataAxesFormats.jl v0.1.1
</title>
<meta name="title" content="Adapters · DataAxesFormats.jl v0.1.1"/>
<meta property="og:title" content="Adapters · DataAxesFormats.jl v0.1.1"/>
<meta property="twitter:title" content="Adapters · DataAxesFormats.jl v0.1.1"/>
<meta name="description" content="Documentation for DataAxesFormats.jl v0.1.1."/>
<meta property="og:description" content="Documentation for DataAxesFormats.jl v0.1.1."/>
<meta property="twitter:description" content="Documentation for DataAxesFormats.jl v0.1.1."/>
<script data-outdated-warner src="assets/warner.js">
</script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/>
<script>documenterBaseURL="."
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js">
</script>
<script src="search_index.js">
</script>
<script src="siteinfo.js">
</script>
<script src="../versions.js">
</script>
<link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/>
<link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/>
<link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/>
<link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/>
<link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/>
<link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/>
<script src="assets/themeswap.js">
</script>
</head>
<body>
<div id="documenter">
<nav class="docs-sidebar">
<a class="docs-logo" href="index.html">
<img src="assets/logo.svg" alt="DataAxesFormats.jl v0.1.1 logo"/>
</a>
<div class="docs-package-name">
<span class="docs-autofit">
<a href="index.html">DataAxesFormats.jl v0.1.1
</a>
</span>
</div>
<button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)
</button>
<ul class="docs-menu">
<li>
<a class="tocitem" href="index.html">Daf
</a>
</li>
<li>
<a class="tocitem" href="readers.html">Readers
</a>
</li>
<li>
<a class="tocitem" href="writers.html">Writers
</a>
</li>
<li>
<a class="tocitem" href="read_only.html">Read-only
</a>
</li>
<li>
<a class="tocitem" href="queries.html">Queries
</a>
</li>
<li>
<a class="tocitem" href="tokens.html">Tokens
</a>
</li>
<li>
<a class="tocitem" href="views.html">Views
</a>
</li>
<li>
<a class="tocitem" href="chains.html">Chains
</a>
</li>
<li>
<a class="tocitem" href="computations.html">Computations
</a>
</li>
<li>
<a class="tocitem" href="copies.html">Copies
</a>
</li>
<li>
<a class="tocitem" href="concat.html">Concat
</a>
</li>
<li class="is-active">
<a class="tocitem" href="adapters.html">Adapters
</a>
<ul class="internal">
<li>
<a class="tocitem" href="#Index">
<span>Index
</span>
</a>
</li>
</ul>
</li>
<li>
<a class="tocitem" href="contracts.html">Contracts
</a>
</li>
<li>
<a class="tocitem" href="formats.html">Formats
</a>
</li>
<li>
<a class="tocitem" href="keys.html">Keys
</a>
</li>
<li>
<a class="tocitem" href="memory_format.html">Memory Format
</a>
</li>
<li>
<a class="tocitem" href="h5df_format.html">H5DF Format
</a>
</li>
<li>
<a class="tocitem" href="files_format.html">Files Format
</a>
</li>
<li>
<a class="tocitem" href="anndata_format.html">AnnData Format
</a>
</li>
<li>
<a class="tocitem" href="reconstruction.html">Reconstruction
</a>
</li>
<li>
<a class="tocitem" href="registry.html">Operations registry
</a>
</li>
<li>
<a class="tocitem" href="operations.html">Query operations
</a>
</li>
<li>
<a class="tocitem" href="storage_types.html">Storage types
</a>
</li>
<li>
<a class="tocitem" href="matrix_layouts.html">Matrix layouts
</a>
</li>
<li>
<a class="tocitem" href="groups.html">Groups
</a>
</li>
<li>
<a class="tocitem" href="messages.html">Messages
</a>
</li>
<li>
<a class="tocitem" href="generic_logging.html">Generic Logging
</a>
</li>
<li>
<a class="tocitem" href="generic_locks.html">Generic Locks
</a>
</li>
<li>
<a class="tocitem" href="generic_types.html">Generic Types
</a>
</li>
<li>
<a class="tocitem" href="generic_functions.html">Generic Functions
</a>
</li>
<li>
<a class="tocitem" href="example_data.html">Example data
</a>
</li>
</ul>
<div class="docs-version-selector field has-addons">
<div class="control">
<span class="docs-label button is-static is-size-7">Version
</span>
</div>
<div class="docs-selector control is-expanded">
<div class="select is-fullwidth is-size-7">
<select id="documenter-version-selector">
</select>
</div>
</div>
</div>
</nav>
<div class="docs-main">
<header class="docs-navbar">
<a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#">
</a>
<nav class="breadcrumb">
<ul class="is-hidden-mobile">
<li class="is-active">
<a href="adapters.html">Adapters
</a>
</li>
</ul>
<ul class="is-hidden-tablet">
<li class="is-active">
<a href="adapters.html">Adapters
</a>
</li>
</ul>
</nav>
<div class="docs-right">
<a class="docs-navbar-link" href="https://github.com/tanaylab/DataAxesFormats.jl/blob/main{path}?plain=1#L{line}" title="View the repository on GitHub">
<span class="docs-icon fa-brands">
</span>
<span class="docs-label is-hidden-touch">GitHub
</span>
</a>
<a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings">
</a>
<a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings">
</a>
</div>
</header>
<article class="content" id="documenter-page">
<h1 id="Adapters">
<a class="docs-heading-anchor" href="#Adapters">Adapters
</a>
<a id="Adapters-1">
</a>
<a class="docs-heading-anchor-permalink" href="#Adapters" title="Permalink">
</a>
</h1>
<article class="docstring">
<header>
<a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring">
</a>
<a class="docstring-binding" id="DataAxesFormats.Adapters" href="#DataAxesFormats.Adapters">
<code>DataAxesFormats.Adapters
</code>
</a> — 
<span class="docstring-category">Module
</span>
<span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring">
</span>
</header>
<section>
<div>
<p>Adapt 
<code>Daf
</code> data to a 
<a href="computations.html#DataAxesFormats.Computations.@computation">
<code>@computation
</code>
</a>.
</p>
</div>
</section>
</article>
<article class="docstring">
<header>
<a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring">
</a>
<a class="docstring-binding" id="DataAxesFormats.Adapters.adapter" href="#DataAxesFormats.Adapters.adapter">
<code>DataAxesFormats.Adapters.adapter
</code>
</a> — 
<span class="docstring-category">Function
</span>
<span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring">
</span>
</header>
<section>
<div>
<pre>
<code class="language-julia hljs">adapter(
    computation::Function,
    daf::DafWriter;
    input_axes::Maybe{ViewAxes} = nothing,
    input_data::Maybe{ViewData} = nothing,
    capture = MemoryDaf,
    output_axes::Maybe{ViewAxes} = nothing,
    output_data::Maybe{ViewData} = nothing,
    empty::Maybe{EmptyData} = nothing,
    relayout::Bool = true,
    overwrite::Bool = false,
)::Any
</code>
</pre>
<p>Invoke a 
<code>computation
</code> on a view of some 
<code>daf
</code> data and return the result; copy a view of the results into the base 
<code>daf
</code> data.
</p>
<p>If you have some 
<code>Daf
</code> data you wish to run a 
<code>computation
</code> on, you need to deal with name mismatches. That is, the names of the input and output data properties of the 
<code>computation
</code> may be different from these used in your data. In addition, you might be interested only in a subset of the computed data properties, to avoiding polluting your data set with irrelevant properties.
</p>
<p>To address these issues, the common idiom for applying computations to 
<code>Daf
</code> data is to use the 
<code>adapter
</code> as follows:
</p>
<ul>
<li>Create a (read-only) view of your data which presents the data properties under the names expected by the 
<code>computation
</code>, using 
<code>input_axes
</code> and 
<code>input_data
</code>. If the 
<code>computation
</code> was annotated by 
<a href="computations.html#DataAxesFormats.Computations.@computation">
<code>@computation
</code>
</a>, then its 
<a href="contracts.html#DataAxesFormats.Contracts.Contract">
<code>Contract
</code>
</a> will be explicitly documented so you will know exactly what to provide.
</li>
<li>Chain this read-only view with an empty 
<code>capture
</code> writable data set (by default, 
<a href="memory_format.html#DataAxesFormats.MemoryFormat.MemoryDaf">
<code>MemoryDaf
</code>
</a>) and pass the result to the 
<code>computation
</code> as the &quot;adapted&quot; data set.
</li>
<li>Once the 
<code>computation
</code> is done, use the 
<code>output_axes
</code> and 
<code>output_data
</code> to create a view of the output, and copy this subset to the original 
<code>daf
</code> data set, using (using 
<a href="copies.html#DataAxesFormats.Copies.copy_all!">
<code>copy_all!
</code>
</a>, 
<code>empty
</code>, 
<code>relayout
</code> (default: 
<code>true
</code>) and 
<code>overwrite
</code> (default: 
<code>false
</code>).
</li>
</ul>
<p>Typically the code would look something like this:
</p>
<pre>
<code class="nohighlight hljs">daf = ... # Some input `Daf` data we wish to compute on.

# Here `daf` contains the inputs for the computation, but possibly
# under a different name.

result = adapter(
    daf;                                   # The Daf data set we want to apply the computation to.
    input_axes = ..., input_data = ...,    # How and what to provide as input to the computation.
    output_axes = ..., output_data = ...,  # How and what to copy back as output of the computation.
    empty = ...,                           # If the input view specifies a subset of some axes.
) do adapted                   # The writable adapted data we can pass to the computation.
    computation(adapted, ...)  # Actually do the computation.
    return ...                 # An additional result outside `daf`.
end

# Here `daf` will contain the specific renamed outputs specified in `adapter`,
# and you can also access the additional non-`daf` data `result`.
</code>
</pre>
<p>This idiom allows 
<a href="computations.html#DataAxesFormats.Computations.@computation">
<code>@computation
</code>
</a> functions to use clear generic names for their inputs and outputs, and still apply them to arbitrary data sets that use more specific names. One can even invoke the same computation with different parameter values, and store the different results in the same data set under different names.
</p>
</div>
</section>
</article>
<h2 id="Index">
<a class="docs-heading-anchor" href="#Index">Index
</a>
<a id="Index-1">
</a>
<a class="docs-heading-anchor-permalink" href="#Index" title="Permalink">
</a>
</h2>
<ul>
</ul>
</article>
<nav class="docs-footer">
<a class="docs-footer-prevpage" href="concat.html">« Concat
</a>
<a class="docs-footer-nextpage" href="contracts.html">Contracts »
</a>
<div class="flexbox-break">
</div>
<p class="footer-message">Powered by 
<a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl
</a> and the 
<a href="https://julialang.org/">Julia Programming Language
</a>.
</p>
</nav>
</div>
<div class="modal" id="documenter-settings">
<div class="modal-background">
</div>
<div class="modal-card">
<header class="modal-card-head">
<p class="modal-card-title">Settings
</p>
<button class="delete">
</button>
</header>
<section class="modal-card-body">
<p>
<label class="label">Theme
</label>
<div class="select">
<select id="documenter-themepicker">
<option value="auto">Automatic (OS)
</option>
<option value="documenter-light">documenter-light
</option>
<option value="documenter-dark">documenter-dark
</option>
<option value="catppuccin-latte">catppuccin-latte
</option>
<option value="catppuccin-frappe">catppuccin-frappe
</option>
<option value="catppuccin-macchiato">catppuccin-macchiato
</option>
<option value="catppuccin-mocha">catppuccin-mocha
</option>
</select>
</div>
</p>
<hr/>
<p>This document was generated with 
<a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl
</a> version 1.7.0. Using Julia version 1.10.5.
</p>
</section>
<footer class="modal-card-foot">
</footer>
</div>
</div>
</div>
</body>
</html>
